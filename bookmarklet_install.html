<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clockify Time to Money</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</head>

<body>
    <br>
    <br>
    <br>
    <br>
    <div class="d-flex flex-column justify-content-center align-items-center">
        <h2>Clockify Time to Money</h2>
        <p>To install, drag the link into your bookmarks bar.</p>

        <a href="javascript:(function(){let normalRate,overtimeRate,normalHoursCap,overtimeHoursCap,config=localStorage.getItem(`clockifyTimeToMoney`),valid=!0;if(null!=config?(config=JSON.parse(config),normalRate=parseFloat(config.normalRate),overtimeRate=parseFloat(config.overtimeRate),normalHoursCap=parseFloat(config.normalHoursCap),overtimeHoursCap=parseFloat(config.overtimeHoursCap)):(normalRate=parseFloat(prompt(`What is your hourly rate?`)),overtimeRate=parseFloat(prompt(`What is your overtime rate?`)),normalHoursCap=parseFloat(prompt(`What is your normal hours cap?`,40)),overtimeHoursCap=parseInt(prompt(`What is your overtime hours cap?`,10)),isNaN(normalRate)||isNaN(overtimeRate)||isNaN(normalHoursCap)||isNaN(overtimeHoursCap)?(valid=!1,alert(`One of the values is invalid. Please try again, make sure to only use numbers.`)):(valid=!0,localStorage.setItem(`clockifyTimeToMoney`,JSON.stringify({normalRate:normalRate,overtimeRate:overtimeRate,normalHoursCap:normalHoursCap,overtimeHoursCap:overtimeHoursCap})))),valid){let e=[{parent:document.querySelector(`#layout-main > div > tracker2 > div > div > div > div > entry-group:nth-child(1) > approval-header > div.cl-d-flex.cl-align-items-end.cl-mt-2.cl-mt-lg-0.cl-justify-content-lg-end.cl-max-width-85`),clock:document.querySelector(`#layout-main > div > tracker2 > div > div > div > div > entry-group:nth-child(1) > approval-header > div.cl-d-flex.cl-align-items-end.cl-mt-2.cl-mt-lg-0.cl-justify-content-lg-end.cl-max-width-85 > div.cl-h2.cl-mb-0.cl-ml-2.cl-lh-1.ng-star-inserted`)}];document.querySelectorAll(`#layout-main > div > tracker2 > div > div > div > div > entry-group`).forEach(((t,r)=>{e.push({parent:document.querySelector(`#layout-main > div > tracker2 > div > div > div > div > entry-group:nth-child(${r+1}) > div > entry-group-header > div > div:nth-child(2)`),clock:document.querySelector(`#layout-main > div > tracker2 > div > div > div > div > entry-group:nth-child(${r+1}) > div > entry-group-header > div > div:nth-child(2) > div.cl-h2.cl-mb-0.cl-ml-2.cl-lh-1`)})})),e.forEach((e=>{const t=document.createElement(`h2`);t.textContent=convertTime(e.clock.textContent),t.style=`margin: 0; margin-left: 2em;`,e.parent.appendChild(t),e.moneyElementReference=t}));function updateClocksMoney(){e.forEach((e=>{e.time=convertTime(e.clock.textContent)}));const t=calculateRateWeekly(e[0].time);e[0].moneyElementReference.textContent=`$${t.toFixed(2)}`;let r=normalHoursCap,o=overtimeHoursCap;for(let t=e.length-1;t>0;t--){let a=e[t].time,l=0;a>r?(l=r*normalRate,a-=r,r=0,a>o&&(a=o),l+=a*overtimeRate,o-=a):(l=a*normalRate,r-=a),e[t].money=l,e[t].moneyElementReference.textContent=`$${l.toFixed(2)}`}}function convertTime(e){const t=e.trim().split(`:`);return parseInt(t[0])+parseInt(t[1])/60+parseInt(t[2])/60/60}function calculateRateWeekly(e){if(e>normalHoursCap){let t=e-normalHoursCap;return t>overtimeHoursCap&&(t=overtimeHoursCap),normalHoursCap*normalRate+t*overtimeRate}return e*normalRate}new MutationObserver((e=>{updateClocksMoney()})).observe(e[0].clock,{characterData:!0,attributes:!1,childList:!1,subtree:!0}),updateClocksMoney()}}());">
            Clockify Time to Money
        </a>
        <br>
        <a href='javascript:(function(){localStorage.removeItem("clockifyTimeToMoney"),alert("Stored values cleared! Run again main script to set them up again.");}());'>
            Reset Clockify Time To Money
        </a>
    </div>

</body>

</html>
